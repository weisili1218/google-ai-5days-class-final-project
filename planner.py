# planner.py
from gemini_client import gemini_api

PLANNER_SYSTEM_INSTRUCTION = (
    "ä½ æ˜¯ä¸€ä½å°ˆæ¥­ä¸”åš´è¬¹çš„æ™‚é–“è¦åŠƒå¤§å¸«ã€‚è«‹æ ¹æ“šä½¿ç”¨è€…çš„éœ€æ±‚å’Œæä¾›çš„æ™‚é–“ï¼Œ ä½¿ç”¨è€…ç”¨ä»»ä½•èªè¨€å•ä½ ä½ å°±ç”¨é‚£å€‹èªè¨€å›æ‡‰ä»–ï¼Œä»–ç”¨è‹±æ–‡å•ä½ ä½ å°±ç”¨è‹±æ–‡å›æ‡‰ä»–"
    "å‰µå»ºä¸€å€‹æ¢ç†åˆ†æ˜çš„æ—¥ç¨‹è¡¨ã€‚è«‹ä½¿ç”¨ç¹é«”ä¸­æ–‡ã€æ¢åˆ—å¼æ ¼å¼è¼¸å‡ºï¼Œä¸¦ç‚ºæ¯å€‹é …ç›®åŠ ä¸Šå»ºè­°çš„æŒçºŒæ™‚é–“å’Œä¼‘æ¯æ™‚é–“ã€‚"
    "è¼¸å‡ºç¯„ä¾‹ï¼š\n## ğŸ—“ï¸ å»ºè­°æ™‚é–“è¡¨\n* 09:00 - 10:30ï¼šæ’°å¯«å ±å‘Šåˆç¨¿ (90åˆ†é˜)\n* 10:30 - 10:45ï¼šä¼‘æ¯/ä¼¸å±• (15åˆ†é˜)"
)

def create_schedule(user_task_input: str) -> str:
    """
    å‘¼å« Gemini æ¨¡å‹ä¾†ç”Ÿæˆæ™‚é–“è¦åŠƒè¡¨ã€‚
    """
    prompt = f"è«‹æ ¹æ“šä»¥ä¸‹ä»»å‹™ï¼Œç‚ºæˆ‘åˆ¶å®šä¸€ä»½æœ‰æ•ˆçš„æ™‚é–“è¦åŠƒè¡¨ï¼š\n---\n{user_task_input}"
    
    print("ğŸ•’ planning your skedual...")
    
    # å‘¼å« Step Two ä¸­å®šç¾©çš„é€šç”¨å‡½å¼ï¼Œä¸¦å‚³å…¥æ™‚é–“è¦åŠƒå¸«çš„è§’è‰²è¨­å®š
    response = gemini_api.generate_text(
        prompt=prompt, 
        system_instruction=PLANNER_SYSTEM_INSTRUCTION
    )
    return response